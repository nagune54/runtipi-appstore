{
  "services": [
    {
      "name": "drupal",
      "image": "drupal:10-apache",
      "isMain": true,
      "internalPort": 80,
      "environment": {
        "DRUPAL_DB_NAME": "ryot",
        "DRUPAL_DB_USER": "tipi",
        "DRUPAL_DB_PASSWORD": "${DB_PASSWORD}",
        "DRUPAL_DB_HOST": "drupal-db"
      },
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/html/modules",
          "containerPath": "/var/www/html/modules"
        },
        {
          "hostPath": "${APP_DATA_DIR}/data/html/themes",
          "containerPath": "/var/www/html/themes"
        },
        {
          "hostPath": "${APP_DATA_DIR}/data/html/profiles",
          "containerPath": "/var/www/html/profiles"
        },
        {
          "hostPath": "${APP_DATA_DIR}/data/html/sites",
          "containerPath": "/var/www/html/sites"
        }
      ],
      "dependsOn": ["drupal-db"]
    },
    {
      "name": "drupal-db",
      "image": "postgres:16-alpine",
      "environment": {
        "POSTGRES_USER": "tipi",
        "POSTGRES_PASSWORD": "${DB_PASSWORD}",
        "POSTGRES_DB": "ryot"
      },
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/postgres",
          "containerPath": "/var/lib/postgresql/data"
        }
      ]
    }
  ],
  "$schema": "../dynamic-compose-schema.json"
}