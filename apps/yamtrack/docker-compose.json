{
  "services": [
    {
      "name": "yamtrack",
      "image": "ghcr.io/fuzzygrim/yamtrack",
      "isMain": true,
      "internalPort": 8080,
      "environment": {
        "TZ": "Asia/Seoul",
        "SECRET": "${YAMTRACK_SECRET}",
        "REDIS_HOST": "yamtrack-redis",
        "REDIS_URL": "redis://redis:6379"
      },
      "dependsOn": ["yamtrack-redis"]
    },
    {
      "name": "yamtrack-redis",
      "image": "redis:alpine",
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/redis",
          "containerPath": "/data"
        }
      ],
      "healthCheck": {
        "test": "redis-cli ping",
        "interval": "1s",
        "timeout": "3s",
        "retries": 30
      }
    }
  ],
  "$schema": "../dynamic-compose-schema.json"
}
